<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-security">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Security | Dynamo</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://dynamofinance.github.io/docs/security"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Security | Dynamo"><meta data-rh="true" name="description" content="Dynamo Audit Report: ERC-4626 vault"><meta data-rh="true" property="og:description" content="Dynamo Audit Report: ERC-4626 vault"><link data-rh="true" rel="icon" href="/favicon.ico"><link data-rh="true" rel="canonical" href="https://dynamofinance.github.io/docs/security"><link data-rh="true" rel="alternate" href="https://dynamofinance.github.io/docs/security" hreflang="en"><link data-rh="true" rel="alternate" href="https://dynamofinance.github.io/docs/security" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://YHEMCW7E5Q-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Dynamo" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.3fa4e237.css">
<link rel="preload" href="/assets/js/runtime~main.bf35ca22.js" as="script">
<link rel="preload" href="/assets/js/main.def1116b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="DynamoFinance" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="DynamoFinance" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"> </b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/DynamoFinance" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo.svg" alt="DynamoFinance" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="DynamoFinance" class="themedImage_ToTc themedImage--dark_i4oU"><b> </b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/links">Links</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/security">Security</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Products/Vault">Products</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Security</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Security</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="dynamo-audit-report-erc-4626-vault">Dynamo Audit Report: ERC-4626 vault<a href="#dynamo-audit-report-erc-4626-vault" class="hash-link" aria-label="Direct link to Dynamo Audit Report: ERC-4626 vault" title="Direct link to Dynamo Audit Report: ERC-4626 vault">​</a></h2><p>Reviewed by: 0x52 (<a href="https://twitter.com/IAm0x52" target="_blank" rel="noopener noreferrer">@IAm0x52</a>)</p><p>Review Dates: 7/10/23 - 7/14/23</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="scope">Scope<a href="#scope" class="hash-link" aria-label="Direct link to Scope" title="Direct link to Scope">​</a></h2><p>The <a href="https://github.com/DynamoFinance/vault/tree/master" target="_blank" rel="noopener noreferrer">Dynamo</a> repo was reviewed at hash <a href="https://github.com/DynamoFinance/vault/tree/c331ffefadec7406829fc9f2e7f4ee7631bef6b3" target="_blank" rel="noopener noreferrer">c331ffefad</a></p><p>In-Scope Contracts</p><ul><li>contracts/aaveAdapter.vy</li><li>contracts/compoundadapter.vy</li><li>contracts/Dynamo4626.vy</li><li>contracts/fraxlendadapter.vy</li><li>contracts/FundsAllocator.vy</li><li>contracts/Governance.vy</li></ul><p>Deployment Chain(s)</p><ul><li>Ethereum Mainnet</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="summary-of-findings">Summary of Findings<a href="#summary-of-findings" class="hash-link" aria-label="Direct link to Summary of Findings" title="Direct link to Summary of Findings">​</a></h2><table><thead><tr><th>Identifier</th><th>Title</th><th>Severity</th><th>Fixed</th></tr></thead><tbody><tr><td><a href="#h-01-access-control-modifiers-on-_claim_fees-will-permanently-lock-proposer">H-01</a></td><td>Access control modifiers on <!-- -->_<!-- -->claim_fees will permanently lock proposer</td><td>High</td><td>Yes</td></tr><tr><td><a href="#h-02-math-error-in-dynamo4626_claimable_fees_available-will-lead-to-fees-or-strategy-lockup">H-02</a></td><td>Math error in Dynamo4626#<!-- -->_<!-- -->claimable_fees_available will lead to fees or strategy lockup</td><td>High</td><td>Yes</td></tr><tr><td><a href="#h-03-malicious-user-can-disable-compound-integration-via-share-manipulation">H-03</a></td><td>Malicious user can disable compound integration via share manipulation</td><td>High</td><td>Yes</td></tr><tr><td><a href="#h-04-dangerous-approvalrejection-criteria-when-number-of-guards-is-odd">H-04</a></td><td>Dangerous approval/rejection criteria when number of guards is odd</td><td>High</td><td>Yes</td></tr><tr><td><a href="#h-05-a-single-malfunctioningmalicious-adapter-can-permanently-dos-entire-vault">H-05</a></td><td>A single malfunctioning/malicious adapter can permanently DOS entire vault</td><td>High</td><td>Yes</td></tr><tr><td><a href="#m-01-governancereplacegovernance-is-unable-to-actually-change-vault-governance">M-01</a></td><td>Governance#replaceGovernance is unable to actually change vault governance</td><td>Med</td><td>Yes</td></tr><tr><td><a href="#m-02-assert-statement-in-dynamo4626_claimable_fees_available-can-cause-vault-softlock-in-the-event-of-partial-fund-loss">M-02</a></td><td>Assert statement in Dynamo4626#<!-- -->_<!-- -->claimable_fees_available can cause vault softlock in the event of partial fund loss</td><td>Med</td><td>yes</td></tr><tr><td><a href="#l-01-aaveadaptervy-has-no-method-to-claim-lp-incentives">L-01</a></td><td>aaveAdapter.vy has no method to claim LP incentives</td><td>Low</td><td></td></tr><tr><td><a href="#l-02-ownership-of-governancevy-cant-be-changed-after-initialization">L-02</a></td><td>Ownership of governance.vy can&#x27;t be changed after initialization</td><td>Low</td><td>Yes</td></tr></tbody></table><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="h-01-access-control-modifiers-on-_claim_fees-will-permanently-lock-proposer">[H-01]<!-- --> Access control modifiers on <!-- -->_<!-- -->claim_fees will permanently lock proposer<a href="#h-01-access-control-modifiers-on-_claim_fees-will-permanently-lock-proposer" class="hash-link" aria-label="Direct link to h-01-access-control-modifiers-on-_claim_fees-will-permanently-lock-proposer" title="Direct link to h-01-access-control-modifiers-on-_claim_fees-will-permanently-lock-proposer">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="details">Details<a href="#details" class="hash-link" aria-label="Direct link to Details" title="Direct link to Details">​</a></h4><p><a href="https://github.com/DynamoFinance/vault/blob/c331ffefadec7406829fc9f2e7f4ee7631bef6b3/contracts/Dynamo4626.vy#L519-L521" target="_blank" rel="noopener noreferrer">Dynamo4626.vy#L519-L521</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">elif _yield == FeeType.PROPOSER:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert msg.sender == self.current_proposer, &quot;Only curent proposer may claim strategy fees.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.total_strategy_fees_claimed += claim_amount</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Dynamo4626#<!-- -->_<!-- -->set_strategy attempts to distribute fees to proposer when proposer changes. The problem is that <!-- -->_<!-- -->claim_fees requires that msg.sender == proposer. Since <!-- -->_<!-- -->set_strategy can only be called by governance this subcall will always revert. The result is that the first proposer will have a monopoly on all proposals since any strategy that wasn&#x27;t submitted by them would fail when attempting to activate it.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lines-of-code">Lines of Code<a href="#lines-of-code" class="hash-link" aria-label="Direct link to Lines of Code" title="Direct link to Lines of Code">​</a></h4><p><a href="https://github.com/DynamoFinance/vault/blob/c331ffefadec7406829fc9f2e7f4ee7631bef6b3/contracts/Dynamo4626.vy#L496-L533" target="_blank" rel="noopener noreferrer">Dynamo4626.vy#L496-L533</a></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="recommendation">Recommendation<a href="#recommendation" class="hash-link" aria-label="Direct link to Recommendation" title="Direct link to Recommendation">​</a></h4><p>Revise access control on <!-- -->_<!-- -->set_strategy. I would suggest allowing anyone to claim tokens but sending to the correct target instead of msg.sender</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="remediation">Remediation<a href="#remediation" class="hash-link" aria-label="Direct link to Remediation" title="Direct link to Remediation">​</a></h4><p>Fixed <a href="https://github.com/DynamoFinance/vault/commit/1601b0acd23783ed87b9b3ae01c6a97a462a41a8" target="_blank" rel="noopener noreferrer">here</a> by allowing governance to claim on behalf of proposer</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="h-02-math-error-in-dynamo4626_claimable_fees_available-will-lead-to-fees-or-strategy-lockup">[H-02]<!-- --> Math error in Dynamo4626#<!-- -->_<!-- -->claimable_fees_available will lead to fees or strategy lockup<a href="#h-02-math-error-in-dynamo4626_claimable_fees_available-will-lead-to-fees-or-strategy-lockup" class="hash-link" aria-label="Direct link to h-02-math-error-in-dynamo4626_claimable_fees_available-will-lead-to-fees-or-strategy-lockup" title="Direct link to h-02-math-error-in-dynamo4626_claimable_fees_available-will-lead-to-fees-or-strategy-lockup">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="details-1">Details<a href="#details-1" class="hash-link" aria-label="Direct link to Details" title="Direct link to Details">​</a></h4><p><a href="https://github.com/DynamoFinance/vault/blob/c331ffefadec7406829fc9f2e7f4ee7631bef6b3/contracts/Dynamo4626.vy#L428-L438" target="_blank" rel="noopener noreferrer">Dynamo4626.vy#L428-L438</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fee_percentage: uint256 = YIELD_FEE_PERCENTAGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if _yield == FeeType.PROPOSER:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fee_percentage = PROPOSER_FEE_PERCENTAGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">elif _yield == FeeType.BOTH:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fee_percentage += PROPOSER_FEE_PERCENTAGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">elif _yield != FeeType.YIELD:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert False, &quot;Invalid FeeType!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">total_fees_ever : uint256 = (convert(total_returns,uint256) * fee_percentage) / 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">assert self.total_strategy_fees_claimed + self.total_yield_fees_claimed &lt;= total_fees_ever, &quot;Total fee calc error!&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the assert statement, total_fees_ever is compared against both fees types of fees claimed. The issue with this is that this is a relative value depending on which type of fee is being claimed. The assert statement on the other hand always compares as if it is FeeType.BOTH. This will lead to this function unexpectedly reverting when trying to claim proposer fees. This leads to stuck fees but also proposer locked as described in H-01.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lines-of-code-1">Lines of Code<a href="#lines-of-code-1" class="hash-link" aria-label="Direct link to Lines of Code" title="Direct link to Lines of Code">​</a></h4><p><a href="https://github.com/DynamoFinance/vault/blob/c331ffefadec7406829fc9f2e7f4ee7631bef6b3/contracts/Dynamo4626.vy#L418-L459" target="_blank" rel="noopener noreferrer">Dynamo4626.vy#L418-L459</a></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="recommendation-1">Recommendation<a href="#recommendation-1" class="hash-link" aria-label="Direct link to Recommendation" title="Direct link to Recommendation">​</a></h4><p>Check should be made against the appropriate values (i.e. proposer should be check against only self.total_strategy_fees_claimed).</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="remediation-1">Remediation<a href="#remediation-1" class="hash-link" aria-label="Direct link to Remediation" title="Direct link to Remediation">​</a></h4><p>Fixed <a href="https://github.com/DynamoFinance/vault/commit/6e762711f55f9cf4bece42706ddef7c92d5b4ac4" target="_blank" rel="noopener noreferrer">here</a> and <a href="https://github.com/DynamoFinance/vault/commit/c649ceda1b7b15b14486bd1332aefb8d48ed5279" target="_blank" rel="noopener noreferrer">here</a> by splitting fee calculations base on fee type being claimed</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="h-03-malicious-user-can-disable-compound-integration-via-share-manipulation">[H-03]<!-- --> Malicious user can disable compound integration via share manipulation<a href="#h-03-malicious-user-can-disable-compound-integration-via-share-manipulation" class="hash-link" aria-label="Direct link to h-03-malicious-user-can-disable-compound-integration-via-share-manipulation" title="Direct link to h-03-malicious-user-can-disable-compound-integration-via-share-manipulation">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="details-2">Details<a href="#details-2" class="hash-link" aria-label="Direct link to Details" title="Direct link to Details">​</a></h4><p>It&#x27;s a common assumption that Compound V2 share ratio can only ever increase but with careful manipulation it can actually be lowered. The full explanation is a bit long but you can find it <a href="https://github.com/code-423n4/2023-01-reserve-findings/issues/310" target="_blank" rel="noopener noreferrer">here</a> in one of my public reports.</p><p><a href="https://github.com/DynamoFinance/vault/blob/c331ffefadec7406829fc9f2e7f4ee7631bef6b3/contracts/FundsAllocator.vy#L67-L71" target="_blank" rel="noopener noreferrer">FundsAllocator.vy#L67-L71</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      if pool.current &lt; pool.last_value:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          # We&#x27;ve lost value in this adapter! Don&#x27;t give it more money!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          blocked_adapters[blocked_pos] = pool.adapter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          blocked_pos += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          pool.delta = 0 # This will result in no tx being generated.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This quirk of Compound V2 can be used to trigger the check in FundsAllocator to block the Compound V2 adapter. This is useful if the user wants to push their own proposal allowing them to sabotage other users and cause loss of yield to the vault.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lines-of-code-2">Lines of Code<a href="#lines-of-code-2" class="hash-link" aria-label="Direct link to Lines of Code" title="Direct link to Lines of Code">​</a></h4><p><a href="https://github.com/DynamoFinance/vault/blob/c331ffefadec7406829fc9f2e7f4ee7631bef6b3/contracts/FundsAllocator.vy#L67-L71" target="_blank" rel="noopener noreferrer">FundsAllocator.vy#L67-L71</a></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="recommendation-2">Recommendation<a href="#recommendation-2" class="hash-link" aria-label="Direct link to Recommendation" title="Direct link to Recommendation">​</a></h4><p>Instead of using an absolute check, instead only block the adapter if there is reasonable loss.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="remediation-2">Remediation<a href="#remediation-2" class="hash-link" aria-label="Direct link to Remediation" title="Direct link to Remediation">​</a></h4><p>Fixed <a href="https://github.com/DynamoFinance/vault/commit/e3092bf4908e5f1d049e18fc52d310c9d8ce29ae" target="_blank" rel="noopener noreferrer">here</a> by allowing larger nominal (but still very small) loss before disabling it</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="h-04-dangerous-approvalrejection-criteria-when-number-of-guards-is-odd">[H-04]<!-- --> Dangerous approval/rejection criteria when number of guards is odd<a href="#h-04-dangerous-approvalrejection-criteria-when-number-of-guards-is-odd" class="hash-link" aria-label="Direct link to h-04-dangerous-approvalrejection-criteria-when-number-of-guards-is-odd" title="Direct link to h-04-dangerous-approvalrejection-criteria-when-number-of-guards-is-odd">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="details-3">Details<a href="#details-3" class="hash-link" aria-label="Direct link to Details" title="Direct link to Details">​</a></h4><p><a href="https://github.com/DynamoFinance/vault/blob/c331ffefadec7406829fc9f2e7f4ee7631bef6b3/contracts/Governance.vy#L310" target="_blank" rel="noopener noreferrer">Governance.vy#L310</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">assert (len(pending_strat.VotesEndorse) &gt;= len(self.LGov)/2) or \</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above assert statement requires that the number of endorsements equals or exceeds the number of guards / 2. This becomes an issue with odd numbers due to truncation. If you were to have 3 guards then even a single approval would allow instant approval ( 3/2 = 1). In this scenario even a single malicious or compromised guard could drain the entire vault via a malicious proposal.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lines-of-code-3">Lines of Code<a href="#lines-of-code-3" class="hash-link" aria-label="Direct link to Lines of Code" title="Direct link to Lines of Code">​</a></h4><p><a href="https://github.com/DynamoFinance/vault/blob/c331ffefadec7406829fc9f2e7f4ee7631bef6b3/contracts/Governance.vy#L291-L324" target="_blank" rel="noopener noreferrer">Governance.vy#L291-L324</a></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="recommendation-3">Recommendation<a href="#recommendation-3" class="hash-link" aria-label="Direct link to Recommendation" title="Direct link to Recommendation">​</a></h4><p>Make the requirement that it must equal or exceed length / 2 + length % 2</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="remediation-3">Remediation<a href="#remediation-3" class="hash-link" aria-label="Direct link to Remediation" title="Direct link to Remediation">​</a></h4><p>Fixed <a href="https://github.com/DynamoFinance/vault/commit/835993b6e9357b2246139cca43502cfc65a34e0a" target="_blank" rel="noopener noreferrer">here</a> by changing <code>len(self.LGov)/2</code> to <code>len(self.LGov)/2 + 1</code> so that a majority vote is required to pass</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="h-05-a-single-malfunctioningmalicious-adapter-can-permanently-dos-entire-vault">[H-05]<!-- --> A single malfunctioning/malicious adapter can permanently DOS entire vault<a href="#h-05-a-single-malfunctioningmalicious-adapter-can-permanently-dos-entire-vault" class="hash-link" aria-label="Direct link to h-05-a-single-malfunctioningmalicious-adapter-can-permanently-dos-entire-vault" title="Direct link to h-05-a-single-malfunctioningmalicious-adapter-can-permanently-dos-entire-vault">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="details-4">Details<a href="#details-4" class="hash-link" aria-label="Direct link to Details" title="Direct link to Details">​</a></h4><p><a href="https://github.com/DynamoFinance/vault/blob/c331ffefadec7406829fc9f2e7f4ee7631bef6b3/contracts/FundsAllocator.vy#L47-L57" target="_blank" rel="noopener noreferrer">FundsAllocator.vy#L47-L57</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">for pos in range(MAX_POOLS):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pool : BalancePool = _pool_balances[pos]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if pool.adapter == empty(address): break</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # If the pool has been removed from the strategy then we must empty it!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if pool.ratio == 0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pool.target = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pool.delta = convert(pool.current, int256) * -1 # Withdraw it all!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pool.target = (total_pool_target_assets * pool.ratio) / _total_ratios</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pool.delta = convert(pool.target, int256) - convert(pool.current, int256)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When rebalancing the vault, FundsAllocator attempts to withdraw/deposit from each adapter. In the event that the underlying protocol (such as AAVE) disallows deposits or withdrawals (or is hacked), the entire vault would be DOS&#x27;d since rebalancing is called on every withdraw, deposit or strategy change.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lines-of-code-4">Lines of Code<a href="#lines-of-code-4" class="hash-link" aria-label="Direct link to Lines of Code" title="Direct link to Lines of Code">​</a></h4><p><a href="https://github.com/DynamoFinance/vault/blob/c331ffefadec7406829fc9f2e7f4ee7631bef6b3/contracts/FundsAllocator.vy#L29-L94" target="_blank" rel="noopener noreferrer">FundsAllocator.vy#L29-L94</a></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="recommendation-4">Recommendation<a href="#recommendation-4" class="hash-link" aria-label="Direct link to Recommendation" title="Direct link to Recommendation">​</a></h4><p>Add an emergency function to force remove adapters and make it accessible via Governance.vy</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="remediation-4">Remediation<a href="#remediation-4" class="hash-link" aria-label="Direct link to Remediation" title="Direct link to Remediation">​</a></h4><p>Fixed <a href="https://github.com/DynamoFinance/vault/commit/24f9d95cc6a7ce62c5a0229c103fe9a95cc39e12" target="_blank" rel="noopener noreferrer">here</a> by simply bypassing failed adapter calls</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="m-01-governancereplacegovernance-is-unable-to-actually-change-vault-governance">[M-01]<!-- --> Governance#replaceGovernance is unable to actually change vault governance<a href="#m-01-governancereplacegovernance-is-unable-to-actually-change-vault-governance" class="hash-link" aria-label="Direct link to m-01-governancereplacegovernance-is-unable-to-actually-change-vault-governance" title="Direct link to m-01-governancereplacegovernance-is-unable-to-actually-change-vault-governance">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="details-5">Details<a href="#details-5" class="hash-link" aria-label="Direct link to Details" title="Direct link to Details">​</a></h4><p><a href="https://github.com/DynamoFinance/vault/blob/c331ffefadec7406829fc9f2e7f4ee7631bef6b3/contracts/Governance.vy#L472-L477" target="_blank" rel="noopener noreferrer">Governance.vy#L472-L477</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">for guard_addr in self.LGov:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if self.VotesGCByVault[vault][guard_addr] == NewGovernance:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VoteCount += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># if len(self.LGov) == VoteCount:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#     Vault(self.Vault).replaceGovernanceContract(NewGovernance)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The code to actually replace the governance contract has been commented out resulting in it being impossible to ever change the governance contract.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lines-of-code-5">Lines of Code<a href="#lines-of-code-5" class="hash-link" aria-label="Direct link to Lines of Code" title="Direct link to Lines of Code">​</a></h4><p><a href="https://github.com/DynamoFinance/vault/blob/c331ffefadec7406829fc9f2e7f4ee7631bef6b3/contracts/Governance.vy#L472-L477" target="_blank" rel="noopener noreferrer">Governance.vy#L472-L477</a></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="recommendation-5">Recommendation<a href="#recommendation-5" class="hash-link" aria-label="Direct link to Recommendation" title="Direct link to Recommendation">​</a></h4><p>Restore code by removing comment</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="remediation-5">Remediation<a href="#remediation-5" class="hash-link" aria-label="Direct link to Remediation" title="Direct link to Remediation">​</a></h4><p>Fixed <a href="https://github.com/DynamoFinance/vault/commit/eb85de2bf7aadacf529691c42ba83d404a3519e9" target="_blank" rel="noopener noreferrer">here</a> by removing comment</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="m-02-assert-statement-in-dynamo4626_claimable_fees_available-can-cause-vault-softlock-in-the-event-of-partial-fund-loss">[M-02]<!-- --> Assert statement in Dynamo4626#<!-- -->_<!-- -->claimable_fees_available can cause vault softlock in the event of partial fund loss<a href="#m-02-assert-statement-in-dynamo4626_claimable_fees_available-can-cause-vault-softlock-in-the-event-of-partial-fund-loss" class="hash-link" aria-label="Direct link to m-02-assert-statement-in-dynamo4626_claimable_fees_available-can-cause-vault-softlock-in-the-event-of-partial-fund-loss" title="Direct link to m-02-assert-statement-in-dynamo4626_claimable_fees_available-can-cause-vault-softlock-in-the-event-of-partial-fund-loss">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="details-6">Details<a href="#details-6" class="hash-link" aria-label="Direct link to Details" title="Direct link to Details">​</a></h4><p><a href="https://github.com/DynamoFinance/vault/blob/c331ffefadec7406829fc9f2e7f4ee7631bef6b3/contracts/Dynamo4626.vy#L438" target="_blank" rel="noopener noreferrer">Dynamo4626.vy#L438</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">assert self.total_strategy_fees_claimed + self.total_yield_fees_claimed &lt;= total_fees_ever, &quot;Total fee calc error!&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the event of partial fund loss there may be legit cases where this assert statement is triggered. If the vault suffers a partial loss but still maintains a positive return (i.e. it has made 100e18 but suffers a loss of 50e18) then this statement will improperly revert. Given this function is called with every deposit and withdraw the vault would be completely DOS&#x27;d until yield (or donation) recovered the difference.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lines-of-code-6">Lines of Code<a href="#lines-of-code-6" class="hash-link" aria-label="Direct link to Lines of Code" title="Direct link to Lines of Code">​</a></h4><p><a href="https://github.com/DynamoFinance/vault/blob/c331ffefadec7406829fc9f2e7f4ee7631bef6b3/contracts/Dynamo4626.vy#L418-L459" target="_blank" rel="noopener noreferrer">Dynamo4626.vy#L418-L459</a></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="recommendation-6">Recommendation<a href="#recommendation-6" class="hash-link" aria-label="Direct link to Recommendation" title="Direct link to Recommendation">​</a></h4><p>Instead of reverting, simply return 0.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="remediation-6">Remediation<a href="#remediation-6" class="hash-link" aria-label="Direct link to Remediation" title="Direct link to Remediation">​</a></h4><p>Fixed <a href="https://github.com/DynamoFinance/vault/commit/6e762711f55f9cf4bece42706ddef7c92d5b4ac4" target="_blank" rel="noopener noreferrer">here</a> by returning 0 instead of reverting</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="l-01-aaveadaptervy-has-no-method-to-claim-lp-incentives">[L-01]<!-- --> aaveAdapter.vy has no method to claim LP incentives<a href="#l-01-aaveadaptervy-has-no-method-to-claim-lp-incentives" class="hash-link" aria-label="Direct link to l-01-aaveadaptervy-has-no-method-to-claim-lp-incentives" title="Direct link to l-01-aaveadaptervy-has-no-method-to-claim-lp-incentives">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="details-7">Details<a href="#details-7" class="hash-link" aria-label="Direct link to Details" title="Direct link to Details">​</a></h4><p>Considering this low since the primary scope for this audit is mainnet Ethereum.</p><p>On alt L1&#x27;s and L2&#x27;s AAVE V3 frequently has LP incentives (such as OP tokens on Optimism). The current adapter has no methodology to claim these tokens. Any tokens accumulated to the vault would be impossible to claim leading to loss of yield for all LP&#x27;s in the vault.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lines-of-code-7">Lines of Code<a href="#lines-of-code-7" class="hash-link" aria-label="Direct link to Lines of Code" title="Direct link to Lines of Code">​</a></h4><p><a href="https://github.com/DynamoFinance/vault/blob/master/contracts/aaveAdapter.vy" target="_blank" rel="noopener noreferrer">aaveAdapter.vy</a></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="recommendation-7">Recommendation<a href="#recommendation-7" class="hash-link" aria-label="Direct link to Recommendation" title="Direct link to Recommendation">​</a></h4><p>Before deploying anything other than mainnet make sure to include a way to claim and distribute/swap rewards to the vault.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="remediation-7">Remediation<a href="#remediation-7" class="hash-link" aria-label="Direct link to Remediation" title="Direct link to Remediation">​</a></h4><p>Acknowledged that this is a limitation of their current implementation</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="l-02-ownership-of-governancevy-cant-be-changed-after-initialization">[L-02]<!-- --> Ownership of governance.vy can&#x27;t be changed after initialization<a href="#l-02-ownership-of-governancevy-cant-be-changed-after-initialization" class="hash-link" aria-label="Direct link to l-02-ownership-of-governancevy-cant-be-changed-after-initialization" title="Direct link to l-02-ownership-of-governancevy-cant-be-changed-after-initialization">​</a></h3><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="details-8">Details<a href="#details-8" class="hash-link" aria-label="Direct link to Details" title="Direct link to Details">​</a></h3><p><strong>Additional change requested after the audit period</strong></p><p>Ownership of governance.vy is set in the constructor but there is no function for change the ownership after it has been set. This hinders future migrations and adds extra complexity to the deployment process.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lines-of-code-8">Lines of Code<a href="#lines-of-code-8" class="hash-link" aria-label="Direct link to Lines of Code" title="Direct link to Lines of Code">​</a></h4><p><a href="https://github.com/DynamoFinance/vault/blob/master/contracts/Governance.vy#L126" target="_blank" rel="noopener noreferrer">Governance.vy#L126</a></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="remediation-8">Remediation<a href="#remediation-8" class="hash-link" aria-label="Direct link to Remediation" title="Direct link to Remediation">​</a></h4><p>Fixed <a href="https://github.com/DynamoFinance/vault/commit/acd2325b9f2a5c9fbed1b52aa5c774eff0f64897" target="_blank" rel="noopener noreferrer">here</a> by adding the replaceOwner function.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/DynamoFinance/dynamofinance.github.io/tree/main/docs/security.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/links"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Links</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Products/Vault"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Vault</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#dynamo-audit-report-erc-4626-vault" class="table-of-contents__link toc-highlight">Dynamo Audit Report: ERC-4626 vault</a></li><li><a href="#scope" class="table-of-contents__link toc-highlight">Scope</a></li><li><a href="#summary-of-findings" class="table-of-contents__link toc-highlight">Summary of Findings</a><ul><li><a href="#h-01-access-control-modifiers-on-_claim_fees-will-permanently-lock-proposer" class="table-of-contents__link toc-highlight">H-01 Access control modifiers on _claim_fees will permanently lock proposer</a></li><li><a href="#h-02-math-error-in-dynamo4626_claimable_fees_available-will-lead-to-fees-or-strategy-lockup" class="table-of-contents__link toc-highlight">H-02 Math error in Dynamo4626#_claimable_fees_available will lead to fees or strategy lockup</a></li><li><a href="#h-03-malicious-user-can-disable-compound-integration-via-share-manipulation" class="table-of-contents__link toc-highlight">H-03 Malicious user can disable compound integration via share manipulation</a></li><li><a href="#h-04-dangerous-approvalrejection-criteria-when-number-of-guards-is-odd" class="table-of-contents__link toc-highlight">H-04 Dangerous approval/rejection criteria when number of guards is odd</a></li><li><a href="#h-05-a-single-malfunctioningmalicious-adapter-can-permanently-dos-entire-vault" class="table-of-contents__link toc-highlight">H-05 A single malfunctioning/malicious adapter can permanently DOS entire vault</a></li><li><a href="#m-01-governancereplacegovernance-is-unable-to-actually-change-vault-governance" class="table-of-contents__link toc-highlight">M-01 Governance#replaceGovernance is unable to actually change vault governance</a></li><li><a href="#m-02-assert-statement-in-dynamo4626_claimable_fees_available-can-cause-vault-softlock-in-the-event-of-partial-fund-loss" class="table-of-contents__link toc-highlight">M-02 Assert statement in Dynamo4626#_claimable_fees_available can cause vault softlock in the event of partial fund loss</a></li><li><a href="#l-01-aaveadaptervy-has-no-method-to-claim-lp-incentives" class="table-of-contents__link toc-highlight">L-01 aaveAdapter.vy has no method to claim LP incentives</a></li><li><a href="#l-02-ownership-of-governancevy-cant-be-changed-after-initialization" class="table-of-contents__link toc-highlight">L-02 Ownership of governance.vy can&#39;t be changed after initialization</a></li><li><a href="#details-8" class="table-of-contents__link toc-highlight">Details</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Get started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Products/Vault">Vault</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://t.co/4RLMjyVNtG" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/DynamoFinance" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/DynamoFinance" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 DynamoFinance.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.bf35ca22.js"></script>
<script src="/assets/js/main.def1116b.js"></script>
</body>
</html>